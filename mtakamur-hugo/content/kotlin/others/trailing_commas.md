---
title: "Trailing commas"
date: 2021-10-31T01:28:27+09:00
draft: false
---

### まとめ

- Kotlin 1.4 以降ではコレクションやメソッド引数の最終要素に"," (trailing comma) を残しておいてもコンパイルエラーになりません
- trailing comma があってもなくてもコードの動作は一切変わりません
- trailing comma をつけるようにしておくと、チーム開発するときのレビューがしやすくなります (コレクションやメソッドの引数に変更を加えても、追加削除した行だけが変更点として表示されるから)

---

### Trailing comma (末尾のカンマ)

コレクションの要素やメソッドのパラメータなど、同列の要素を複数個並べたいときは下記のようにカンマで区切って並べます。
この時、最後の要素の後には","を書かないのが一般的かと思います。
実際、Kotlin 1.4 より古いバージョンでは、余分なコンマを付けているとコンパイルエラーになります。

```kotlin
            val colors = listOf(
                "red",
                "green",
                "blue" // <-ここにはカンマをつけていない
            )
```

ところが Kotlin 1.4 以降では、最終要素の後ろにも","を残しておいて OK になりました。
この余分なカンマのことを trailing comma と呼びます。

### なにがうれしい？

trailing comma があってもなくてもコードの動作には一切影響ありません。

trailing comma が若干ありがたく感じるのは、チームで開発を進めて、お互いにコードをレビューしあうような状況でしょうか。
開発を進めていくと、既存のメソッドにパラメータを追加したり、逆に削除したくなることはよくあるかと思いますが、この時に "これは最後の要素だからカンマを消して…" とか考える必要がなくなります。
カンマの追加/削除が本質的な変更点ではありえないでしょうから、余計な変更を加える必要がなくなり、コードレビューをするときも、本質的な変更点だけに集中することができるようになります。

配列やパラメータの順番だけを変更するときも幾分やりやすくなっているかと思います。 カンマのあるなしは気にせず、配列の行丸ごとの置換で OK になります。公式ドキュメントにもその旨記述があります。 多分ありがたいのはこれくらいでしょうか。

#### コンマ？カンマ？

今さらコンマとカンマで表記ゆれがあることに気づきました…。
アドバイスとアドヴァイスみたいな。
カタカナで発音を表現しようとしている時点で間違ってますから、どっちでもいいですよね。
